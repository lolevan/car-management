# Django API для управления информацией об автомобилях

Данный проект реализует веб-приложение для управления информацией об автомобилях с возможностью добавления комментариев, регистрации и авторизации пользователей. API предоставляет доступ к основным функциям через REST.

## Функционал
- **Управление автомобилями**: просмотр, создание, редактирование и удаление (только для владельца).
- **Комментарии**: добавление и просмотр комментариев для каждого автомобиля.
- **Регистрация и авторизация**: пользователи могут зарегистрироваться и управлять только своими автомобилями.
- **REST API**: доступ ко всем функциям через API.

---

## Требования
- Python 3.10+
- Django (последняя стабильная версия)
- Django REST Framework (DRF)
- SQLite (по умолчанию) или PostgreSQL (опционально)

---

## Установка и настройка

### 1. Клонирование репозитория
Склонируйте проект на локальную машину:
```bash
git clone https://github.com/lolevan/car-management.git
cd car-management
```

### 2. Создание виртуального окружения
Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate    # Для Linux/Mac
venv\Scripts\activate       # Для Windows
```

### 3. Установка зависимостей
Установите все необходимые пакеты:
```bash
pip install -r requirements.txt
```

### 4. Выполнение миграций
Примените миграции для настройки базы данных:
```bash
python project/manage.py migrate
```

### 5. Создание суперпользователя
Для доступа к административной панели создайте суперпользователя:
```bash
python project/manage.py createsuperuser
```

### 6. Запуск сервера разработки
Запустите сервер разработки:
```bash
python project/manage.py runserver
```

Откройте браузер и перейдите по адресу: [http://127.0.0.1:8000](http://127.0.0.1:8000)

---

## Использование

### Веб-интерфейс
- **Список автомобилей**: доступен на главной странице `/`.
- **Детали автомобиля**: страница с информацией о конкретном автомобиле и комментариями.
- **Добавление, редактирование и удаление автомобилей**: доступно только для зарегистрированных пользователей.
- **Регистрация и авторизация**: встроенные формы Django.

### API
API реализовано с использованием Django REST Framework (DRF) и поддерживает токен-аутентификацию.

#### Получение токена авторизации
Для получения токена отправьте POST-запрос на `/api-token-auth/` с `username` и `password`:
```bash
curl -X POST -d "username=admin&password=admin" http://127.0.0.1:8000/api-token-auth/
```

Пример ответа:
```json
{
    "token": "7d32398a47c232948d6d8b0502f0d854bbb41d6f"
}
```

Токен необходимо передавать в заголовке `Authorization` для всех запросов к API:
```
Authorization: Token 7d32398a47c232948d6d8b0502f0d854bbb41d6f
```

---

### Основные эндпоинты API

#### 1. Автомобили
| Метод | URL               | Описание                              |
|-------|-------------------|---------------------------------------|
| GET   | `/api/cars/`      | Получить список всех автомобилей.     |
| GET   | `/api/cars/<id>/` | Получить информацию об автомобиле.    |
| POST  | `/api/cars/`      | Создать новый автомобиль.             |
| PUT   | `/api/cars/<id>/` | Обновить информацию об автомобиле.    |
| DELETE| `/api/cars/<id>/` | Удалить автомобиль.                   |


Пример запроса для получения всех машин:
  ```bash
  curl -X GET http://127.0.0.1:8000/api/cars/
  ```

Пример запроса для получения одной машины:
  ```bash
  curl -X GET http://127.0.0.1:8000/api/cars/1/
  ```

Пример запроса для создания автомобиля:
```bash
curl -X POST http://127.0.0.1:8000/api/cars/ \
-H "Authorization: Token 7d32398a47c232948d6d8b0502f0d854bbb41d6f" \
-H "Content-Type: application/json" \
-d '{
    "make": "Toyota",
    "model": "Camry",
    "year": 2021,
    "description": "Compact sedan with excellent fuel efficiency."
}'
```

Пример запроса для обновления машины:
  ```bash
  curl -X PUT http://127.0.0.1:8000/api/cars/1/ \
  -H "Authorization: Token <your-token>" \
  -H "Content-Type: application/json" \
  -d '{
      "make": "Toyota",
      "model": "Corolla",
      "year": 2022,
      "description": "Reliable and efficient compact sedan."
  }'
  ```

Пример запроса для удаления машины:
  ```bash
  curl -X DELETE http://127.0.0.1:8000/api/cars/1/ \
  -H "Authorization: Token <your-token>"
  ```


#### 2. Комментарии
| Метод | URL                          | Описание                               |
|-------|------------------------------|----------------------------------------|
| GET   | `/api/cars/<id>/comments/`   | Получить комментарии к автомобилю.     |
| POST  | `/api/cars/<id>/comments/`   | Добавить комментарий к автомобилю.     |

Пример запроса для получения всех комментарий на определенный автомобиль:
  ```bash
  curl -X GET http://127.0.0.1:8000/api/cars/1/comments/
  ```

Пример запроса для добавления комментария:
```bash
curl -X POST http://127.0.0.1:8000/api/cars/1/comments/ \
-H "Authorization: Token 7d32398a47c232948d6d8b0502f0d854bbb41d6f" \
-H "Content-Type: application/json" \
-d '{
    "content": "This car is great, but a bit noisy at high speeds."
}'
```

---

## Административная панель
Доступна по адресу: [http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/)

Используйте учетные данные суперпользователя для входа. В административной панели можно управлять всеми моделями (`Car`, `Comment`, `User`).



## Контакты
Для вопросов или предложений по улучшению проекта, пожалуйста, обращайтесь:  
[vanechka.nikitin.20044@gmail.com](mailto:vanechka.nikitin.20044@gmail.com)
